<% set_meta_tags title: "新規投稿" %>
<div class="row">
  <div class="col-md-6  col-md-offset-3">
    <%= form_with model: @form, url: works_path, method: :post, local: true, class: "form--common" do |form| %>
      <% if @crete_errors %>
        <%= render "shared/error_messages", object: @crete_errors %>
      <% end %>
      <%= form.hidden_field :user_id, value: current_user.id %>

      <div class="field--category">
        <%= form.label :category_id, class: "f-control" %>
        <div class="category__parent">
          <%= select_tag "parent_category_id", options_from_collection_for_select(@category_parent_array, :id, :name), include_blank: "選択してください", class:"select_field" %>
        </div>
      </div>

      <div class="field">
        <%= form.label :image, class: 'image_label f-control' do %>
          <div class="prev-contents">
            <div class="prev-content">
              <%= image_tag(Settings.default_image[:work], alt: "preview", class: "prev-work") %>
              <%= form.file_field :image, class: 'hidden_work', accept: "image/jpeg,image/gif,image/png" %>
            </div>
          </div>
        <% end %>
      </div>

      <div class="field">
        <%= form.label :title, class: "f-control" %>
        <%= form.text_field :title %>
        <div class="form__underline"></div>
      </div>

      <div class="field">
        <%= form.label :concept, class: "f-control" %>
        <%= form.text_area :concept %>
        <div class="form__underline"></div>
      </div>

      <div class="field">
        <%= form.label :description, class: "f-control" %>
        <%= form.text_area :description %>
        <div class="form__underline"></div>
      </div>

      <% count = 0 %>
      <%= form.fields_for :illustrations do |f| %>

        <div class="field">
          <%= f.label :photo, class: 'image_label f-control' do %>
            <div class="prev-contents">
              <div class="prev-content">
                <%= image_tag(Settings.default_image[:work], alt: "preview", class: "prev-#{count}") %>
                <%= f.file_field :photo, class: "hidden_photo#{count}", accept: "image/jpeg,image/gif,image/png" %>
              </div>
            </div>
          <% end %>
          <% count += 1 %>
        </div>

        <div class="field">
          <%= f.label :name, class: "f-control" %>
          <%= f.text_field :name %>
          <div class="form__underline"></div>
        </div>

        <div class="field">
          <%= f.label :description, class: "f-control" %>
          <%= f.text_area :description %>
          <div class="form__underline"></div>
        </div>
        <br>
      <% end %>
      <%= form.submit %>
    <% end %>
  </div>
</div>
